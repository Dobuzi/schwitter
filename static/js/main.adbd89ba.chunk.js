(this.webpackJsonpschwitter=this.webpackJsonpschwitter||[]).push([[0],{35:function(e,t,a){e.exports=a(69)},52:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),i=a.n(c),o=a(5),l=a(19),u=a(4),s=a(6),m=a.n(s),p=a(10),f=a(2);a(70),a(27),a(42),a(71);f.initializeApp({apiKey:"AIzaSyBjBKI92GbVHBypKlfrS4AwkoZxAPKcm1A",authDomain:"schwitter-a567c.firebaseapp.com",databaseURL:"https://schwitter-a567c.firebaseio.com",projectId:"schwitter-a567c",storageBucket:"schwitter-a567c.appspot.com",messagingSenderId:"111395784331",appId:"1:111395784331:web:9f43c9ff036a049bacf68e",measurementId:"G-3WCS6MMEJP"}),f.analytics();var d=f,h=f.auth(),g=f.firestore(),E=f.storage(),b=(a(45),a(52),function(e){var t=e.newAccount,a=e.setNewAccount,c=(e.refreshUser,Object(n.useState)("")),i=Object(o.a)(c,2),l=i[0],u=i[1],s=Object(n.useState)(""),f=Object(o.a)(s,2),d=f[0],g=f[1],E=Object(n.useState)(""),b=Object(o.a)(E,2),v=b[0],w=b[1],O=Object(n.useState)(!1),j=Object(o.a)(O,2),y=j[0],N=j[1],x=Object(n.useState)(""),S=Object(o.a)(x,2),k=S[0],I=S[1],C={url:"https://dobuzi.github.io/schwitter",handleCodeInApp:!0},_=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.sendSignInLinkToEmail(l,C);case 3:window.localStorage.setItem("emailForSignIn",l),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),I(e.t0.message);case 9:h.isSignInWithEmailLink(window.location.href)&&((t=window.localStorage.getItem("emailForSignIn"))||window.prompt("Please provide your email for confirmation"),h.signInWithEmailLink(t,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn")})).catch((function(e){console.log(e.message)})));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?u(n):"password"===a?g(n):"passwordCheck"===a&&w(n)},F=function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,!t){e.next=6;break}d===v?h.createUserWithEmailAndPassword(l,d).then((function(){h.currentUser.sendEmailVerification(C).then((function(){I("You can sign in after verifying your email."),h.signOut()})).catch((function(e){I(e.message)}))})):I("The passwords are not the same."),e.next=8;break;case 6:return e.next=8,h.signInWithEmailAndPassword(l,d);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),I(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:y?_:F,className:"container"},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:l,onChange:A,className:"authInput"}),!y&&r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:d,onChange:A,className:"authInput"}),t&&r.a.createElement("input",{name:"passwordCheck",type:"password",placeholder:"Repeat password",required:!0,value:v,onChange:A,className:"authInput"}),r.a.createElement("input",{type:"submit",value:t?"Create Account":"Sign In",className:"authInput authSubmit"}),k&&r.a.createElement("span",{className:"authError"},k)),r.a.createElement("div",{className:"authSwitchContainer"},r.a.createElement("span",{onClick:function(){a((function(e){return!e})),N(!1)},className:"authSwitch"},t?"Sign In":"Create Account"),!t&&r.a.createElement("span",{onClick:function(){return N((function(e){return!e}))},className:"authSwitch"},y?"Sign in with email and Password":"Sign in by verifying email")))}),v=a(23),w=a(9),O=(a(57),function(e){var t=e.newAccount,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(a=t.target.name)?n=new d.auth.GoogleAuthProvider:"github"===a&&(n=new d.auth.GithubAuthProvider),e.next=4,h.signInWithRedirect(n);case 4:h.getRedirectResult().then((function(e){if(e.credential){var t=e.credential.accessToken;console.log(t)}var a=e.user;console.log(a)})).catch((function(e){console.log(e.message)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,!t&&r.a.createElement("div",{className:"authBtns"},r.a.createElement("button",{onClick:a,name:"google",className:"authBtn"},r.a.createElement(w.a,{icon:v.b,size:"2x",color:"#4885ed"})),r.a.createElement("button",{onClick:a,name:"github",className:"authBtn"},r.a.createElement(w.a,{icon:v.a,size:"2x"}))))}),j=a(11),y=(a(58),function(e){var t=e.refreshUser,a=Object(n.useState)(!1),c=Object(o.a)(a,2),i=c[0],l=c[1];return r.a.createElement("div",{className:"authContainer"},r.a.createElement("span",{onClick:function(){window.location.reload()},className:"auth__logo"},r.a.createElement(w.a,{icon:j.c,color:"#a29bfe",size:"2x"}),"pang!"),r.a.createElement(b,{newAccount:i,setNewAccount:l,refreshUser:t}),r.a.createElement(O,{newAccount:i}))}),N=a(34),x=(a(59),function(e){var t=e.pangObj,a=e.isAuthor,c=Object(n.useState)(!1),i=Object(o.a)(c,2),l=i[0],u=i[1],s=Object(n.useState)(t.text),f=Object(o.a)(s,2),d=f[0],h=f[1],b=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.doc("pangs/".concat(t.id)).delete();case 2:return e.next=4,E.refFromURL(t.attachmentURL).delete();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){return u((function(e){return!e}))},O=function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g.doc("pangs/".concat(t.id)).update({text:d});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:a?{backgroundColor:"#a29bfe",color:"whitesmoke"}:{},className:"pang"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:O,className:"container pangEdit"},r.a.createElement("input",{type:"text",placeholder:"Edit your pang",value:d,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;h(t)},className:"formInput"}),r.a.createElement("input",{type:"submit",value:"Update",className:"formBtn"})),r.a.createElement("span",{onClick:v,className:"formBtn cancelBtn"},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{style:a?{color:"whitesmoke"}:{}},t.text),t.attachmentURL&&r.a.createElement("img",{src:t.attachmentURL,alt:"pang img"}),a&&r.a.createElement("div",{className:"pang__actions"},r.a.createElement("span",{onClick:b},r.a.createElement(w.a,{icon:j.f})),r.a.createElement("span",{onClick:v},r.a.createElement(w.a,{icon:j.d})))))}),S=a(73),k=(a(60),function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(o.a)(a,2),i=c[0],l=c[1],u=Object(n.useState)(""),s=Object(o.a)(u,2),f=s[0],d=s[1],h=function(){var e=Object(p.a)(m.a.mark((function e(a){var n,r,c,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==i){e.next=3;break}return e.abrupt("return");case 3:if(n="",r="",!f){e.next=14;break}return r="".concat(t.uid,"/").concat(Object(S.a)()),c=E.ref().child(r),e.next=10,c.putString(f,"data_url");case 10:return o=e.sent,e.next=13,o.ref.getDownloadURL();case 13:n=e.sent;case 14:return u={text:i,expiredAt:Date.now()+8e3,author:t.uid,attachmentURL:n,attachmentLocation:r},e.next=17,g.collection("pangs").add(u);case 17:l(""),d("");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:h,className:"factoryForm"},r.a.createElement("div",{className:"factoryInput__container"},r.a.createElement("input",{value:i,onChange:function(e){var t=e.target.value;l(t)},type:"text",placeholder:"What's on your mind?",maxLength:120,className:"factoryInput__input"}),r.a.createElement("input",{type:"submit",value:"\u2193",className:"factoryInput__arrow"})),r.a.createElement("label",{htmlFor:"attach-file",className:"factoryInput__label"},r.a.createElement("span",null,"Add photos"),r.a.createElement(w.a,{icon:j.e})),r.a.createElement("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.target.result;d(t)},a.readAsDataURL(t)},className:"factoryInput__input__image"}),f&&r.a.createElement("div",{className:"factoryForm__attachment"},r.a.createElement("img",{src:f,alt:"profile",style:{backgroundImage:f}}),r.a.createElement("button",{onClick:function(){return d("")},className:"factoryForm__clear"},r.a.createElement("span",null,"Clear"),r.a.createElement(w.a,{icon:j.b})))))}),I=(a(61),function(e){var t=e.userObj,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){g.collection("pangs").where("expiredAt",">",Date.now()).orderBy("expiredAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));l(t)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(k,{userObj:t}),r.a.createElement("div",{className:"home__pangs"},i.map((function(e){return r.a.createElement(x,{key:e.id,pangObj:e,isAuthor:e.author===t.uid})}))))}),C=(a(62),function(e){e.userObj;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-ul"},r.a.createElement("li",null,r.a.createElement(l.b,{to:"/",className:"linkHome"},r.a.createElement("span",{className:"nav__logo"},r.a.createElement(w.a,{icon:j.c,color:"#a29bfe",size:"2x"}),"pang!"))),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/profile",className:"linkProfile"},r.a.createElement(w.a,{icon:j.g,color:"#ffeaa7",size:"2x"})))))}),_=(a(65),function(e){var t=e.userObj,a=e.refreshUser,c=Object(u.f)(),i=Object(n.useState)(t.displayName),l=Object(o.a)(i,2),s=l[0],f=l[1],d=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("pangs").where("author","==",t.uid).orderBy("expiredAt","desc").get();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===s){e.next=5;break}return e.next=4,t.updateProfile({displayName:s});case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d()})),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:E,className:"profileForm"},r.a.createElement("input",{onChange:function(e){var t=e.target.value;f(t)},type:"text",autoFocus:!0,placeholder:"Display Name",value:s,className:"formInput"}),r.a.createElement("span",{type:"submit",className:"formBtn"},r.a.createElement(w.a,{icon:j.a}))),r.a.createElement("span",{onClick:function(){h.signOut(),c.push("/")},className:"formBtn cancelBtn logOut"},"Sign Out"))}),A=(a(66),function(e){var t=e.refreshUser,a=e.isLoggedIn,n=e.userObj;return r.a.createElement(l.a,null,a&&r.a.createElement(C,{userObj:n}),r.a.createElement(u.c,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"router__container"},r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(I,{userObj:n})),r.a.createElement(u.a,{exact:!0,path:"/profile"},r.a.createElement(_,{userObj:n,refreshUser:t})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(y,{refreshUser:t})))))});a(67);var F=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(null),l=Object(o.a)(i,2),u=l[0],s=l[1];return Object(n.useEffect)((function(){h.onAuthStateChanged((function(e){s(e?{displayName:e.displayName?e.displayName:e.email.split("@")[0],uid:e.uid,emailVerified:e.emailVerified,updateProfile:function(t){return e.updateProfile(t)}}:null),c(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(A,{refreshUser:function(){var e=h.currentUser;s({displayName:e.displayName,uid:e.uid,emailVerified:e.emailVerified,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(u&&u.emailVerified),userObj:u}):r.a.createElement("div",{className:"loading__container"},r.a.createElement("span",{className:"loading"},"Loading...")),r.a.createElement("footer",null,"\xa9 ",(new Date).getFullYear()," Pang!"))};a(68);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.adbd89ba.chunk.js.map